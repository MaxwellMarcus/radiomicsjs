import createWebWorkerPromise from '../core/internal/createWebWorkerPromise.js';
import config from '../itkConfig.js';
async function readMeshArrayBuffer(webWorker, arrayBuffer, fileName, mimeType) {
    let worker = webWorker;
    return await createWebWorkerPromise('mesh-io', worker)
        .then(({ webworkerPromise, worker: usedWorker }) => {
        worker = usedWorker;
        return webworkerPromise.postMessage({
            operation: 'readMesh',
            name: fileName,
            type: mimeType,
            data: arrayBuffer,
            config
        }, [arrayBuffer]).then(async function (mesh) {
            return await Promise.resolve({ mesh, webWorker: worker });
        });
    });
}
export default readMeshArrayBuffer;
